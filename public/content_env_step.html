<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>환경발자국</title>

        <!-- update the version number as needed -->
        <script defer src="/__/firebase/9.13.0/firebase-app-compat.js"></script>
        <!-- include only the Firebase features as you need -->
        <script defer src="/__/firebase/9.13.0/firebase-auth-compat.js"></script>
        <script defer src="/__/firebase/9.13.0/firebase-database-compat.js"></script>
        <script defer src="/__/firebase/9.13.0/firebase-firestore-compat.js"></script>
        <script defer src="/__/firebase/9.13.0/firebase-storage-compat.js"></script>
        <!-- 
            initialize the SDK after all desired features are loaded, set useEmulator to false
            to avoid connecting the SDK to running emulators.
        -->
        <script defer src="/__/firebase/init.js?useEmulator=true"></script>

        <!-- index.html 적용-->
        <link rel="stylesheet" href="./CSS/style.css">

        
    </head>
    <body>
        

        <!-- 상단 메뉴바 -->
        <header class="container">
            <div class="home">New Earth</div>
            <!-- env : environment -->
            <nav class="top_list">
                <div class="location_env_record item">환경일지</div>
                <div class="location_env_protect_record item">환경보호방법</div>
                <div class="location_env_step item">환경발자국</div>
            </nav>
            <!-- right -->
            <nav class="top_list_2">
                <div id="main" class="item">지구이미지</div>
            </nav>
        </header>
        
        <!-- 환경발자국 -->
        <div id="page_env_step">
            <aside class="left_list">
                <div class="location_env_step item">환경발자국</div>
                <div class="location_env_todo item">To do list</div>
            </aside>
            <section id="content_env_step">
                <!-- <div class="seed_img">
                     <img src="./imgs/seed.png" class="seed_img"> 
                     </div>
                    -->
            </section>
        </div>
        
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
            import "https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js";

            import { 
                getAuth,// authentication 설정
                signInWithPopup, //google 로그인을 팝업창에 띄우기 위해
                GoogleAuthProvider, //google login 기능
                signInWithEmailAndPassword,// email 로그인
                createUserWithEmailAndPassword, //email 회원가입
            } from 'https://www.gstatic.com/firebasejs/9.2.0/firebase-auth.js';


            // Your web app's Firebase configuration
            const firebaseConfig = {
                apiKey: "AIzaSyA1IhyMtiCyPjCzgvwI7prkD9QK9NjIHas",
                authDomain: "newearth-b3659.firebaseapp.com",
                projectId: "newearth-b3659",
                storageBucket: "newearth-b3659.appspot.com",
                messagingSenderId: "109865594723",
                appId: "1:109865594723:web:576164973901997fdf2d56"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);

            // firebase의 인증객체를 받아둘 객체
            const auth = firebase.auth();
            // authoProvider를 GoogleAuthProvider를 이용한다.
            var provider = new firebase.auth.GoogleAuthProvider();
            //signInWithPopup(authProvider);

            auth
            .signInWithPopup(provider)
            .then((result) => {
                /** @type {firebase.auth.OAuthCredential} */
                var credential = result.credential;

                // This gives you a Google Access Token. You can use it to access the Google API.
                var token = credential.accessToken;
                // The signed-in user info.
                var user = result.user;
                // ...
                console.log('success');
                console.log(user);
                console.log(user.uid);

                //화면 전환
                // window.location.href="./content_env_step.html"
                // console.log(data);
                // console.log(auth);
                
                
            })
            .catch((error) => {
                // Handle Errors here.
                var errorCode = error.code;
                var errorMessage = error.message;
                // The email of the user's account used.
                var email = error.email;
                // The firebase.auth.AuthCredential type that was used.
                var credential = error.credential;
                // ...
            });
        </script>
        
        <script src="./js/content_env_step.js"></script>
        <!-- <script type="module" src="./js/firebase.js"></script> -->
    </body>
</html>